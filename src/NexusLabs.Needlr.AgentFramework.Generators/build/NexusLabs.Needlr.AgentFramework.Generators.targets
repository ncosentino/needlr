<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <Target Name="NeedlrWriteMafTopologyFile"
          AfterTargets="Build"
          Condition="'$(NeedlrDiagnostics)' == 'true'">

    <PropertyGroup>
      <_NeedlrMafOutputPath Condition="'$(NeedlrDiagnosticsPath)' != ''">$(NeedlrDiagnosticsPath)</_NeedlrMafOutputPath>
      <_NeedlrMafOutputPath Condition="'$(_NeedlrMafOutputPath)' == ''">$(MSBuildProjectDirectory)NeedlrDiagnostics\</_NeedlrMafOutputPath>
    </PropertyGroup>

    <Message Importance="high"
             Text="Needlr MAF topology graph written to $(_NeedlrMafOutputPath)"
             Condition="Exists('$(_NeedlrMafOutputPath)')" />
  </Target>

</Project>
